<p id="notice"><%= notice %></p>

<h1>Articles</h1>

<% if user_signed_in? %>
<%= link_to 'Edit Profile',edit_user_registration_path, method: :get%>
<%= link_to 'Logout',destroy_user_session_path, :method => :delete%>
<% end %>

<% if !(user_signed_in?) %>
<%= link_to 'Log in', new_user_session_path, method: :get%>
<%= link_to 'Sign up',new_user_registration_path, method: :get%>
<% end %>

<%= link_to "Lanci", launches_path, action: :get %>
<br><br>

<div>
  <%= form_with url: articles_path, method: :get do |form| %>
    <%= form.label :find, "Cerca:" %>
    <%= form.text_field :find, {value: (session[:find].nil? ? '':session[:find]) , onchange: 'this.form.submit()'} %>
    <%= form.submit "cerca", name:nil %>
    Mostra solo:
    <%= form.check_box :local, {checked: (session[:local].nil? or session[:local]==false ? false:true), onchange: 'this.form.submit()'}, true, nil %>
    <%= form.label :local, 'interni' %>
    <%= form.check_box :ext, {checked: (session[:ext].nil? or session[:ext]==false ? false:true), onchange: 'this.form.submit()'}, true, nil %>
    <%= form.label :ext, 'esterni' %>
    <%#= form.submit "aggiorna", name:nil %>
  <% end %>

</div>

<table>
  <thead>
    <tr>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @articles.each do |article| %>
      <tr>
        <td>
          <div>
            <%= if article.local==true
        	  link_to article.title, article
        	  else
        	  link_to article.title, article.url 
        	  end %> |
            <%= link_to "commenti", comments_url(article) %>
          </div>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<!== %= link_to 'New Article', new_article_path %>
